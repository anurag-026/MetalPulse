const fs = require('fs');
const path = require('path');
const strip = require('strip-comments');

// folders we want to skip (autogenerated or not your code)
const EXCLUDE_DIRS = [
  'node_modules',
  'android',
  'ios',
  '.git',
  '.expo',
  'build',
  'dist',
];

function walk(dir) {
  fs.readdirSync(dir).forEach(file => {
    const filepath = path.join(dir, file);

    if (fs.statSync(filepath).isDirectory()) {
      if (!EXCLUDE_DIRS.includes(file)) {
        walk(filepath);
      }
    } else if (/\.(js|jsx|ts|tsx)$/.test(file)) {
      const code = fs.readFileSync(filepath, 'utf8');
      const stripped = strip(code);
      fs.writeFileSync(filepath, stripped, 'utf8');
      console.log('Cleaned:', filepath);
    }
  });
}

// ðŸ‘‡ restrict only to your app source folder (adjust if needed)
walk('./src');
